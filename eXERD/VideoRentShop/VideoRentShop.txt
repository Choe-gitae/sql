/* 고객정보 */
CREATE TABLE CUST (
	TEL VARCHAR(15) NOT NULL, /* 전화번호 */
	ADDTEL VARCHAR(15), /* 추가전화번호 */
	NAME VARCHAR(15), /* 이름 */
	ADDR VARCHAR(100), /* 주소 */
	EMAIL VARCHAR(50) /* 이메일 */
);

COMMENT ON TABLE CUST IS '고객정보';

COMMENT ON COLUMN CUST.TEL IS '전화번호';

COMMENT ON COLUMN CUST.ADDTEL IS '추가전화번호';

COMMENT ON COLUMN CUST.NAME IS '이름';

COMMENT ON COLUMN CUST.ADDR IS '주소';

COMMENT ON COLUMN CUST.EMAIL IS '이메일';

CREATE UNIQUE INDEX PK_CUST_TEL
	ON CUST (
		TEL ASC
	);

ALTER TABLE CUST
	ADD
		CONSTRAINT PK_CUST_TEL
		PRIMARY KEY (
			TEL
		);

/* 대여상황 */
CREATE TABLE RENT (
	RENTNO NUMBER NOT NULL, /* 대여번호 */
	RETDATE DATE DEFAULT SYSDATE+7, /* 반납예정일 */
	TEL VARCHAR(15), /* 전화번호 */
	VIDNO NUMBER /* 비디오번호 */
);

COMMENT ON TABLE RENT IS '대여상황';

COMMENT ON COLUMN RENT.RENTNO IS '대여번호';

COMMENT ON COLUMN RENT.RETDATE IS '반납예정일';

COMMENT ON COLUMN RENT.TEL IS '전화번호';

COMMENT ON COLUMN RENT.VIDNO IS '비디오번호';

CREATE UNIQUE INDEX PK_RENT_RENTNO
	ON RENT (
		RENTNO ASC
	);

ALTER TABLE RENT
	ADD
		CONSTRAINT PK_RENT_RENTNO
		PRIMARY KEY (
			RENTNO
		);

/* 비디오 */
CREATE TABLE VIDEO (
	VIDNO NUMBER NOT NULL, /* 비디오번호 */
	RET CHAR(6) DEFAULT '반납', /* 반납여부 */
	INFONO NUMBER /* 비디오정보번호 */
);

COMMENT ON TABLE VIDEO IS '비디오';

COMMENT ON COLUMN VIDEO.VIDNO IS '비디오번호';

COMMENT ON COLUMN VIDEO.RET IS '반납여부';

COMMENT ON COLUMN VIDEO.INFONO IS '비디오정보번호';

CREATE UNIQUE INDEX PK_VIDEO_VIDNO
	ON VIDEO (
		VIDNO ASC
	);

ALTER TABLE VIDEO
	ADD
		CONSTRAINT PK_VIDEO_VIDNO
		PRIMARY KEY (
			VIDNO
		);

/* 영상정보 */
CREATE TABLE VID_INFO (
	INFONO NUMBER NOT NULL, /* 비디오정보번호 */
	DIR VARCHAR(60), /* 감독 */
	TIT VARCHAR(100), /* 제목 */
	ACT VARCHAR(150), /* 배우 */
	GEN VARCHAR(30) DEFAULT '기타', /* 장르 */
	SUMM VARCHAR(2400) /* 요약정보 */
);

COMMENT ON TABLE VID_INFO IS '영상정보';

COMMENT ON COLUMN VID_INFO.INFONO IS '비디오정보번호';

COMMENT ON COLUMN VID_INFO.DIR IS '감독';

COMMENT ON COLUMN VID_INFO.TIT IS '제목';

COMMENT ON COLUMN VID_INFO.ACT IS '배우';

COMMENT ON COLUMN VID_INFO.GEN IS '장르';

COMMENT ON COLUMN VID_INFO.SUMM IS '요약정보';

CREATE UNIQUE INDEX PK_INFO_INFONO
	ON VID_INFO (
		INFONO ASC
	);

ALTER TABLE VID_INFO
	ADD
		CONSTRAINT PK_INFO_INFONO
		PRIMARY KEY (
			INFONO
		);

ALTER TABLE RENT
	ADD
		CONSTRAINT FK_RENT_TEL
		FOREIGN KEY (
			TEL
		)
		REFERENCES CUST (
			TEL
		);

ALTER TABLE RENT
	ADD
		CONSTRAINT FK_RENT_VIDNO
		FOREIGN KEY (
			VIDNO
		)
		REFERENCES VIDEO (
			VIDNO
		);

ALTER TABLE VIDEO
	ADD
		CONSTRAINT FK_VIDEO_INFONO
		FOREIGN KEY (
			INFONO
		)
		REFERENCES VID_INFO (
			INFONO
		);